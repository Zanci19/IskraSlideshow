<!DOCTYPE html>
<html>
<head>
    <title>Test Fetch</title>
</head>
<body>
    <h1>Testing Direct API Fetch</h1>
    <div id="result"></div>
    <script>
        async function testFetch() {
            const resultDiv = document.getElementById('result');
            try {
                resultDiv.innerHTML = 'Attempting to login...';
                
                const loginUrl = 'https://www.easistent.com/m/login';
                const loginData = {
                    uporabnik: 'zanci.torkarci64@gmail.com',
                    geslo: 'szts11l!',
                    supported_user_types: ['parent', 'child']
                };
                
                const loginHeaders = {
                    'Content-Type': 'application/json',
                    'User-Agent': 'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36',
                    'x-app-name': 'child',
                    'x-client-version': '11101',
                    'x-client-platform': 'android'
                };
                
                const loginResponse = await fetch(loginUrl, {
                    method: 'POST',
                    headers: loginHeaders,
                    body: JSON.stringify(loginData),
                    mode: 'cors'
                });
                
                resultDiv.innerHTML += '<br>Login response status: ' + loginResponse.status;
                
                const loginResult = await loginResponse.json();
                resultDiv.innerHTML += '<br>Login successful!';
                resultDiv.innerHTML += '<br>Response: ' + JSON.stringify(loginResult).substring(0, 200);
                
            } catch (error) {
                resultDiv.innerHTML += '<br>Error: ' + error.message;
                console.error('Full error:', error);
            }
        }
        
        testFetch();
    </script>
</body>
</html>
